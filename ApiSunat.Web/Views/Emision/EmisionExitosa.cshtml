@model ApiSunat.Domain.Entities.Documento
@{
    ViewData["Title"] = "Comprobante Emitido";
    bool esFactura = Model.TipoDocumento == "Factura";
}

<div class="text-center py-5">
    <i class="fas fa-check-circle fa-5x text-success mb-3"></i>

    <h1 class="display-6">¡Comprobante Emitido Exitosamente!</h1>

    <p class="lead">
        Se generó @(esFactura ? "la Factura" : "la Boleta")
        <strong>@Model.Serie-@Model.Correlativo.ToString("D8")</strong>
        para <strong>@Model.Cliente.NombreRazonSocial</strong>.
    </p>

    <hr class="my-4" style="max-width: 400px; margin-left: auto; margin-right: auto;" />

    <p>¿Qué deseas hacer ahora?</p>

    <div class="d-flex justify-content-center gap-3 mt-4">
        <button type="button" class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#modalImprimir">
            <i class="fas fa-print me-2"></i> Imprimir (A4 / Ticket)
        </button>
        <a asp-action="DescargarPdfA4" asp-route-documentoId="@Model.DocumentoId"
           class="btn btn-secondary btn-lg">
            <i class="fas fa-file-pdf me-2"></i> Descargar PDF
        </a>
        <a asp-controller="Emision" asp-action="Index" asp-route-empresaId="@Model.EmpresaId" class="btn btn-outline-secondary btn-lg">
            <i class="fas fa-plus me-2"></i> Emitir otro comprobante 
        </a>
    </div>
</div>

<div class="modal fade" id="modalImprimir" tabindex="-1" aria-labelledby="modalImprimirLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalImprimirLabel">Seleccionar Formato de Impresión</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>¿En qué formato deseas imprimir tu comprobante?</p>
                <div class="d-grid gap-2">

                    <a asp-controller="Emision" asp-action="ImprimirA4" asp-route-documentoId="@Model.DocumentoId"
                       class="btn btn-lg btn-outline-primary"
                       target="_blank">
                        <i class="fas fa-file-invoice me-2"></i> Formato A4 (Factura)
                    </a>

                    <a asp-controller="Emision" asp-action="Imprimir" asp-route-documentoId="@Model.DocumentoId"
                       class="btn btn-lg btn-outline-secondary"
                       target="_blank">
                        <i class="fas fa-receipt me-2"></i> Formato Ticket (80mm)
                    </a>

                </div>
            </div>
        </div>
    </div>
</div>